(function(){var e=function(e){e.stopPropagation(),e.preventDefault(),n();var r=e.dataTransfer.files,i=[];for(var s=0,o;o=r[s];s++){var u=new FileReader;u.onloadend=function(e,n){return function(r){var i=new XMLHttpRequest,s=r.target.result,o=s.substr(s.indexOf(",")+1),u,a,f;if(e.type.match("image.*")){s.length>32768&&(f="<figcaption>In IE8, data URIs cannot be larger than 32,768 characters.</figcaption>"),a=['<figure><img class="thumb" src="',s,'" title="',e.name,'"/>',f,"</figure>"].join("");var l="none";i.onreadystatechange=function(){if(i.readyState==4&&i.status==200){var e=JSON.parse(i.responseText).key,t=[window.location.href,"?i=",e].join("");u=['<div class="textarea"><dt><text>Your Link</text></dt><dt><input readonly="" onfocus="this.select()" value="',t,'" type="text"></dt></div>'].join(""),document.getElementById(["file_",n+1].join("")).innerHTML+=[u].join("")}},i.open("POST","/documents",!0),i.send(o)}else document.getElementById("drop_zone").setAttribute("class","highlight"),document.getElementById("drop_zone").innerHTML='Use <a href="/">editor</a> for non-image files !!!',t,setTimeout(function(){document.getElementById("drop_zone").removeAttribute("class"),document.getElementById("drop_zone").innerHTML='Drop images here or open an <a href="/">editor</a>'},1e3)}}(o,s),u.readAsDataURL(o);if(o.type.match("image.*")){var a=['<ol id="file_',s+1,'"><h3>Name: ',o.name,"</h3><dl>","<dt>Type</dt><dd>",o.type||"n/a","</dd>","<dt>Size</dt><dd>",o.size," bytes</dd>","<dt>Last Modified</dt><dd>",o.lastModifiedDate?o.lastModifiedDate.toDateString():"n/a","</dd>","</dl></ol>"].join("");i.push(a),u=""}}r.length&&(document.getElementById("list").innerHTML="<ol>"+i.join("")+"</ol>")},t=function(e){e.stopPropagation(),e.preventDefault(),document.getElementById("drop_zone").setAttribute("class","highlight")},n=function(){document.getElementById("drop_zone").removeAttribute("class")},r=function(e){var t=(new Date).getTime();for(var n=0;n<1e7;n++)if((new Date).getTime()-t>e)break},i=function(){var e={},t=window.location.search.substring(1),n=t.split("&");for(var r=0;r<n.length;r++){var i=n[r].split("=");if(typeof e[i[0]]=="undefined")e[i[0]]=decodeURIComponent(i[1]);else if(typeof e[i[0]]=="string"){var s=[e[i[0]],decodeURIComponent(i[1])];e[i[0]]=s}else e[i[0]].push(decodeURIComponent(i[1]))}return e}(),s=document.getElementById("drop_zone");window.File&&window.FileReader&&window.FileList&&window.Blob?(s.addEventListener("drop",e,!1),s.addEventListener("dragover",t,!1),s.addEventListener("dragenter",t,!1),s.addEventListener("dragleave",n,!1),s.innerHTML='Drop images here or open an <a href="/">editor</a>'):(s.innerHTML='The Image APIs are not fully supported in this browser, try paste your text in <a href="/">editor</a>',s.className="highlight");var o=document.documentElement;o.className=o.className.replace("no-","");if(typeof i.i!="undefined"){document.body.innerHTML="";var u=new XMLHttpRequest;u.onreadystatechange=function(){if(u.readyState==4&&u.status==404)window.location.href="/img";else if(u.readyState==4&&u.status==200){var e=['<img src="data:image/gif;base64,',u.responseText,'"/>'].join("");doc_href=['<a href="'+e+'">',e,"</a>"].join(""),document.body.innerHTML+=['<h1><a href="/img" class="logo" alt="Image Drop"></a></h1>',e].join("")}},doc_uri=["/raw/",i.i].join(""),u.open("GET",doc_uri,!0),u.send()}})()